# Math Utils Project

Простой проект, содержащий математические утилиты для статистических вычислений (расчет среднего арифметического и дисперсии). Проект организован с использованием `src`-структуры и включает тесты, конфигурацию сборки и автоматизацию через Makefile.

## Структура проекта

```text
my_project/
├── src/
│   └── math_utils/   # Исходный код пакета
├── tests/            # Тесты (pytest)
├── dist/             # Артефакты сборки (появляются после build)
├── requirements.txt  # Зафиксированные зависимости
├── setup.py          # Конфигурация сборки
├── Makefile          # Команды для управления проектом
└── README.md         # Документация
```

## Начало работы

### 1. Создание и активация виртуального окружения

Перед началом работы необходимо создать изолированное виртуальное окружение. Выполните команды, соответствующие вашей операционной системе.

**Linux / macOS (bash/zsh):**
```bash
# Создание
python3 -m venv .venv

# Активация
source .venv/bin/activate
```

**Windows (PowerShell):**
```powershell
# Создание
python -m venv .venv

# Активация
.venv\Scripts\Activate.ps1
# Если выполнение скриптов запрещено политикой, используйте cmd: .venv\Scripts\activate.bat
```

### 2. Установка зависимостей

После активации виртуального окружения установите необходимые библиотеки:

```bash
# Обновление pip
pip install --upgrade pip

# Установка зависимостей из requirements.txt
pip install -r requirements.txt

# Установка проекта в режиме редактирования (обязательно для запуска тестов)
pip install -e .
```

*Примечание: Если вы используете `pip-tools`, вы можете сгенерировать `requirements.txt` из `requirements.in` командой `pip-compile requirements.in`.*

## Тестирование

Для запуска тестов используется `pytest`. Убедитесь, что вы установили пакет в режиме редактирования (`pip install -e .`), чтобы тесты видели модуль `math_utils`.

**Запуск всех тестов:**
```bash
pytest -q
```

**Проверка покрытия кода (опционально):**
```bash
coverage run -m pytest
coverage report -m
```

## Сборка пакета

Для создания дистрибутивов (sdist `.tar.gz` и wheel `.whl`) используется инструмент `build`.

1. Установите инструмент сборки (если еще не установлен):
   ```bash
   pip install build
   ```

2. Запустите сборку:
   ```bash
   python -m build
   ```

Артефакты сборки появятся в директории `dist/`.

## Использование Makefile (Автоматизация)

Для удобства в проект добавлен `Makefile` (для Linux/macOS) или команды для Windows, позволяющие выполнять рутинные задачи одной командой.

**Основные команды:**

*   `make venv` — Создание виртуального окружения.
*   `make install` — Установка зависимостей из `requirements.txt`.
*   `make test` — Установка пакета в dev-режиме и запуск тестов.
*   `make build` — Сборка пакета (wheel и sdist).
*   `make freeze` — Сохранение текущих версий библиотек в `requirements.txt`.
*   `make clean` — Очистка временных файлов (`build`, `dist`, `.venv`).